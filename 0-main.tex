% This template is based on the apa7 latex class.
% I recommend reading about the class here:
% https://ctan.math.illinois.edu/macros/latex/contrib/apa7/apa7.pdf
% The class includes various useful commands which all format documents in the correct apa7 style.

% Documentlass can be stu (student), doc (document), jou (journal), or man (manuscript)
% Use stu for Course papers
\documentclass[man, floatsintext, a4paper, 11pt, biblatex, donotrepeattitle]{apa7}
\usepackage[english]{babel}

%%%%% PACKAGES
% subfiles
\usepackage{csquotes}
\usepackage{subfiles}
%hyperlink colors fix
\usepackage{listings}
\lstset{ 
  language=R,                     % the language of the code
  basicstyle=\footnotesize\ttfamily, % the size of the fonts that are used for the code
  numbers=left,                   % where to put the line-numbers
  firstnumber=last,
  numberstyle=\small\color{bluethread},  % the style that is used for the line-numbers
  stepnumber=1,                   % the step between two line-numbers. If it is 1, each line
                                  % will be numbered
  numbersep=5pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{codegray},  % choose the background color. You must add \usepackage{color}
  showspaces=false,               % show spaces adding particular underscores
  showstringspaces=false,         % underline spaces within strings
  showtabs=false,                 % show tabs within strings adding particular underscores
  %frame=single,                   % adds a frame around the code
  %rulecolor=\color{black},        % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. commens (green here))
  tabsize=2,                      % sets default tabsize to 2 spaces
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=false,        % sets if automatic breaks should only happen at whitespace
  keywordstyle=\color{rose_red},      % keyword style
  otherkeywords={!,!=,~,\$,*,\&,\%/\%,\%*\%,\%\%,<-,<<-,_},
  otherkeywords=\color{green},
  commentstyle=\color{green},   % comment style
  stringstyle=\color{green}      % string literal style
} 
\usepackage{xcolor}
\definecolor{bluethread}{RGB}{4,54,115}
\definecolor{codegray}{RGB}{246,246,246}
\definecolor{cmu_red}{RGB}{196,18,48}
\definecolor{rose_red}{RGB}{239,58,71}
\definecolor{rose_red}{RGB}{239,58,71}
\definecolor{green}{RGB}{0,150,71}
\usepackage{ulem}
\usepackage{booktabs}
\usepackage{amssymb}
\hypersetup{
    colorlinks,
    linkcolor={blue!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}

\newcommand{\inlineR}[1]{\footnotesize\texttt{\colorbox{codegray}{#1}}}

\usepackage{datatool}
\usepackage{ifthen}

% Load the CSV file
\DTLloaddb{chunknums}{scripts/chunk-num_lister.csv}

% Define a command to look up content
%\newcommand{\liner}[1]{%
%  \DTLforeach{chunk_nums}{\col1=content_cleaned, \col2=Line}{%
%    \ifthenelse{\equal{#1}{\col1}}{\col2}{}%
%  }%
%}

%\newcommand{\getValue}[1]{%
%  \DTLforeach{chunk-num}{\ColumnOne=content_cleaned,\ColumnTwo=Line}{%
%    \ifthenelse{\equal{\ColumnOne}{#1}}{%
%      \edef\storedValue{\ColumnTwo}%
%    }{%
%      \typeout{No match for #1 in \ColumnOne}%
%    }%
%  }%
%}

% Define the command to get the value
\newcommand{\getValue}[1]{
  \DTLforeach{chunknums}{\ColumnOne=content_cleaned,\ColumnTwo=Line}{
    \ifthenelse{\equal{\ColumnOne}{#1}}{
      \StrBefore{\ColumnTwo}{,}
    }
  }
}

%\usepackage{titlesec}

%\titleformat{\section}
%  {\normalfont\Roman\Big\bfseries\color{black}}
%  {\thesection}
%  {1em}
%  {\thesection\hspace{0.6em}}
%\titleformat{\subsection}
%  {\normalfont\Roman\Big\it\color{black}}
%  {\thesubsection}
%  {1em}
%  {}
%\titleformat{\subsubsection}
%  {\normalfont\Roman\Big\it\color{black}}
%  {\thesubsubsection}
%  {1em}
%  {}


% Title
\title{The Art of Wrangling: Best practices for reporting web-based eye-tracking data in language research}
\shorttitle{The art of wrangling}

% Author
\author{University: XXX}
\affiliation{Authors: XXX, XXX}


% Authornote, if desired uncomment:
% \authornote{}

% Abstract, if desired uncomment:
%\abstract{\subfile{0-abstract}}

% biblatex reference file
\addbibresource{references.bib}

\begin{document}
\maketitle

\tableofcontents
\newpage

% Add all section subfiles here. More can be created if needed
\subfile{abstract}
\subfile{1-introduction}
\subfile{2-act_one}
\subfile{3-act_two}
\subfile{4-act_three}
\subfile{5-Discussion_Conclusion}
%\subfile{outline}

% sections are done with \section, \subsection and \subsubsection.
% for more information, see https://ctan.math.illinois.edu/macros/latex/contrib/apa7/apa7.pdf

\printbibliography
% include all sources in references.bib
% cite sources in text with \autocite, or:
% \parencite for "(Author, 2023)"
% \textcite for "Author (2023)"
\end{document}
\end{document}
